# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 25 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ)

#### ‚úÖ –£–¥–∞–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–§–∞–π–ª:** `src/utils/emailVerification.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ö–æ–¥—ã —Ç–µ–ø–µ—Ä—å –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ production, —Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã HTTP Security Headers
- **–§–∞–π–ª:** `vercel.json`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã HSTS, CSP –∏ —É–ª—É—á—à–µ–Ω—ã Permissions-Policy
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–î–µ–ø–ª–æ–π:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Vercel

### 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (—Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)

#### ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫ –≤ Supabase

**–í–ê–ñ–ù–û:** –≠—Ç–æ —Å–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å! –°–µ–π—á–∞—Å –ª—é–±–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `database/fix_rls_policies_security.sql`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–º –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (—á–µ—Ä–µ–∑ CLI):**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install -g supabase

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
supabase db push --file database/fix_rls_policies_security.sql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
SELECT tablename, policyname, cmd, qual 
FROM pg_policies 
WHERE tablename IN ('users', 'email_verification_codes');
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ `id::text = current_setting(...)`.

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–¥–æ –∑–∞–ø—É—Å–∫–∞ –≤ production):

- [ ] ‚úÖ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ (src/utils/emailVerification.ts, vercel.json)
- [ ] ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase (database/fix_rls_policies_security.sql)
- [ ] ‚úÖ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Vercel (–¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö headers)
- [ ] üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏:

- [ ] üìß –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email —á–µ—Ä–µ–∑ Supabase Edge Function (—Å–µ–π—á–∞—Å –∫–æ–¥—ã —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª–∏)
- [ ] üîí –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ `supabase.auth.resetPasswordForEmail()`
- [ ] üìä –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Supabase Dashboard

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):

- [ ] üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cloudflare –¥–ª—è DDoS –∑–∞—â–∏—Ç—ã
- [ ] üìà –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π rate limiting —á–µ—Ä–µ–∑ Edge Functions
- [ ] üéØ –ü—Ä–æ–≤–µ—Å—Ç–∏ penetration testing

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫

**–¢–µ—Å—Ç 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —á—É–∂–∏–µ –¥–∞–Ω–Ω—ã–µ**

```sql
-- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–µ—Ä–µ–∑ UI
-- –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor:
SELECT * FROM users WHERE email != current_setting('request.jwt.claims')::json->>'email';
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (0 —Å—Ç—Ä–æ–∫)

**–¢–µ—Å—Ç 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ**

```sql
SELECT * FROM users WHERE id::text = current_setting('request.jwt.claims')::json->>'sub';
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 1 —Å—Ç—Ä–æ–∫–∞ —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP Headers

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Network ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å ‚Üí Headers

**–î–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:**
- `Strict-Transport-Security`
- `Content-Security-Policy`
- `X-Frame-Options: DENY`
- `X-Content-Type-Options: nosniff`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–æ–≤

**Production:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –û—Ç–∫—Ä–æ–π—Ç–µ Console (F12)
3. –ö–æ–¥ –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω (—Ç–æ–ª—å–∫–æ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥ `12****`)

**Development:**
1. –¢–æ –∂–µ —Å–∞–º–æ–µ –≤ dev —Ä–µ–∂–∏–º–µ
2. –ü–æ–ª–Ω—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Å –ø–æ–º–µ—Ç–∫–æ–π `‚ö†Ô∏è DEV MODE`

---

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–ª–æ–º–∞–ª–∏ –¥–æ—Å—Ç—É–ø

**–°–∏–º–ø—Ç–æ–º—ã:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ –∏–ª–∏ —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:**

```sql
-- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ RLS (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏!)
ALTER TABLE users DISABLE ROW LEVEL SECURITY;

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–±–ª–µ–º—É
-- –ó–∞—Ç–µ–º –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤–∫–ª—é—á–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ:
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
```

### CSP –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã

**–°–∏–º–ø—Ç–æ–º—ã:** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç hCaptcha –∏–ª–∏ Supabase

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ CSP –≤ `vercel.json`, –¥–æ–±–∞–≤–∏–≤ –Ω—É–∂–Ω—ã–µ –¥–æ–º–µ–Ω—ã:

```json
{
  "key": "Content-Security-Policy",
  "value": "... connect-src 'self' https://your-new-domain.com ..."
}
```

### –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–°–∏–º–ø—Ç–æ–º—ã:** –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–∏—Å—å–º–∞ —Å –∫–æ–¥–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase Edge Function –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email
2. –í development –∫–æ–¥—ã –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SendGrid –∏–ª–∏ –¥—Ä—É–≥–æ–π email —Å–µ—Ä–≤–∏—Å

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Logs
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Browser Console –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –û—Ç–∫—Ä–æ–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Supabase Dashboard

–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:

- **Logs** ‚Üí API Logs - –Ω–µ–æ–±—ã—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **Auth** ‚Üí Users - –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Database** ‚Üí Performance - SQL injection –ø–æ–ø—ã—Ç–∫–∏

### Vercel Analytics

–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ:

- –ù–µ–æ–±—ã—á–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (–≤–æ–∑–º–æ–∂–Ω—ã–π DDoS)
- 403/401 –æ—à–∏–±–∫–∏ (–ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞)
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç–µ `SECURITY_AUDIT.md` —Å –Ω–æ–≤—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏
2. üìù –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email –æ—Ç–ø—Ä–∞–≤–∫–∏
3. üß™ –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
4. üöÄ –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≤ production!

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 25 —è–Ω–≤–∞—Ä—è 2026*
*–ê–≤—Ç–æ—Ä: Claude Code Assistant*
