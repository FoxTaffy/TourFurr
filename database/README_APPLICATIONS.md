# О таблице Applications

## Что это было?

Таблица `applications` была создана для системы **голосования админов** за заявки на участие в мероприятии.

### Как это должно было работать:

1. Пользователь регистрируется и подает заявку (`application`)
2. Заявка попадает в таблицу `applications` со статусом `pending`
3. **9 админов** голосуют "За" или "Против" через интерфейс `VotingPanel.vue`
4. Когда набирается необходимое количество голосов:
   - Если большинство "За" → статус `approved`
   - Если большинство "Против" → статус `rejected`
5. Одобренные получают доступ к локации и оплате

### Таблицы в системе:

- `applications` - сами заявки
- `admin_votes` - голоса админов по каждой заявке

### Функции:

- `get_pending_applications_for_admin(admin_user_id)` - получить заявки для голосования
- `cast_vote_on_application(application_id, admin_id, vote)` - проголосовать

## Почему удалено?

Текущая система регистрации работает **напрямую через users таблицу**:

1. Пользователь регистрируется → сразу попадает в `users` с `status = 'pending'`
2. Админы просматривают users в AdminPage.vue
3. Админы напрямую меняют статус на `approved` / `rejected`
4. Нет системы голосования - решение принимается одним админом

### Преимущества упрощенной системы:

- ✅ Меньше таблиц в БД
- ✅ Проще код и логика
- ✅ Быстрее обработка заявок
- ✅ Нет необходимости в координации между 9 админами

### Недостатки:

- ❌ Нет коллективного решения
- ❌ Один админ может принять решение единолично
- ❌ Нет истории голосов

## Как восстановить систему голосования?

Если в будущем понадобится система голосования:

1. Примените SQL из `database/applications_schema.sql`
2. Примените SQL из `database/voting_system_schema.sql`
3. Восстановите компонент `src/components/VotingPanel.vue` из git истории
4. Добавьте таб "Голосование" в `AdminPage.vue`
5. Модифицируйте регистрацию чтобы создавать `application` вместо прямого апрува в `users`

## Текущая система (Февраль 2026)

**Таблица:** `users`

**Поля для заявок:**
- `status`: `pending` | `approved` | `rejected`
- `email_verified`: проверка email
- `created_at`: дата регистрации

**Процесс:**
```
Регистрация → Email verification → users.status='pending' →
Админ ревью → Апрув/Реджект → Email уведомление → Доступ к локации/оплате
```

**Нет голосования, нет applications таблицы.**
